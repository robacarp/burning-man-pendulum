<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      body {
        background-color: #ddd;
      }
    </style>
    <script type="text/javascript">
      //gamma = 160 seconds
      //longest pendulum N = 51
      //

var $canvas = null, $2d = null, $objects = [], $timer = 0, $pendulums = [], $frame_delay = 25, $algorithms = [], $ticker = 0;

function setup(){
  $canvas = document.getElementById('canvas');
  $2d = canvas.getContext('2d');  // for later, maybe inspect the experimental-webgl context?

  var j;
  for (i = 0; i < 15; i ++) {
    j = new pendulum( 650, 100, i, 160, 51 - i )
    $pendulums.push( j );
  }

  for (i in $pendulums)
    $objects.push( $pendulums[i] );

  // the "bar" at the top
  var b = new ball(650,100,5);
  b.fill = true;
  $objects.push( b );

  draw();
  $timer = setInterval(draw, $frame_delay);
}

function draw(){
  $ticker ++;
  colorit();
  $2d.clearRect(0,0, $canvas.width,$canvas.height);
  for (i in $objects) {
    if ($objects[i].increment)
      $objects[i].increment();
    if ($objects[i].draw)
      $objects[i].draw($2d);
  }
}

function colorit(){
  for (i in $pendulums){
    $algorithms[1]($objects[i].ball, i, $ticker);
  }
}

onload = setup;
    </script>

    <script type="text/javascript" src="ball.js"></script>
    <script type="text/javascript" src="color.js"></script>
    <script type="text/javascript" src="pendulum.js"></script>
    <script type="text/javascript" src="point.js"></script>

    <!-- coloring algorithms -->
    <script type="text/javascript" src="black-white.js"></script>
    <script type="text/javascript" src="rainbow.js"></script>

  </head>
  <body>
    <a href="javascript:clearInterval($timer);">Killit</a>
    <a href="javascript:$timer = setInterval(draw, $frame_delay);">Runit</a>
    <canvas id="canvas" width="1500" height="1500"></canvas>
  </body>
</html>

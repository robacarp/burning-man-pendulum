<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      body {
        background-color: #ddd;
      }
    </style>
    <script type="text/javascript">
      //gamma = 160 seconds
      //longest pendulum N = 51
      //

var $canvas = null, $2d = null, $objects = [], $timer = 0, $pendulums = [], $frame_delay = 25

function setup(){
  $canvas = document.getElementById('canvas');
  $2d = canvas.getContext('2d');  // for later, maybe inspect the experimental-webgl context?

  for (i = 0; i < 15; i ++)
    $pendulums.push( new pendulum( 650, 100, i, 160, 51 - i ) );

  for (i in $pendulums)
    $objects.push( $pendulums[i] )

  // the "bar" at the top
  $objects.push( { x:650, y:100, draw: function(context){ 
        context.beginPath();
        context.arc( this.x, this.y, 8 /* radius */, 0, Math.PI * 2, true );
        context.fill();
        context.closePath();
      }});

  draw();
  $timer = setInterval(draw, $frame_delay);
}

function draw(){
  $ticker ++;
  colorit();
  $2d.clearRect(0,0, $canvas.width,$canvas.height);
  for (i in $objects) {
    if ($objects[i].increment)
      $objects[i].increment();
    if ($objects[i].draw)
      $objects[i].draw($2d);
  }
}

function colorit(){
  for (i in $pendulums){
    $algorithms[0]($objects[i].ball, i, $ticker);
  }
}

onload = setup;
    </script>
    <script type="text/javascript" src="black-white.js"></script>
    <script type="text/javascript" src="ball.js"></script>
    <script type="text/javascript" src="color.js"></script>
    <script type="text/javascript" src="pendulum.js"></script>
    <script type="text/javascript" src="point.js"></script>

  </head>
  <body>
    <a href="javascript:clearInterval($timer);">Killit</a>
    <a href="javascript:$timer = setInterval(draw, $frame_delay);">Runit</a>
    <canvas id="canvas" width="1500" height="1500"></canvas>
  </body>
</html>
